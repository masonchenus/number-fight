<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Int Field: Decoys</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@800&display=swap');

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #040404;
            font-family: 'JetBrains Mono', monospace;
            color: white;
            user-select: none;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            cursor: crosshair;
        }

        .ui-layer {
            position: absolute;
            z-index: 10;
            pointer-events: none;
            width: 100%;
            height: 100%;
        }

        .pointer-events-auto {
            pointer-events: auto;
        }

        .glow-text {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 6px 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            text-transform: uppercase;
            font-size: 0.7rem;
            letter-spacing: 1px;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: white;
        }

        .btn-ai {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.4);
            color: #d8b4fe;
        }

        .btn-ai:hover {
            background: rgba(168, 85, 247, 0.3);
            border-color: #a855f7;
        }

        input {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #4ade80;
            padding: 4px 8px;
            font-family: inherit;
            font-size: 0.8rem;
            width: 60px;
            outline: none;
        }

        #minimap-container {
            width: 180px;
            height: 180px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: absolute;
            right: 24px;
            bottom: 120px;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
        }

        #graph-container {
            width: 200px;
            height: 80px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: absolute;
            left: 24px;
            bottom: 120px;
            border-radius: 4px;
        }

        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 12px;
            width: 12px;
            border-radius: 50%;
            background: #4ade80;
            cursor: pointer;
            margin-top: -4px;
        }

        .collapsed {
            max-height: 40px !important;
            overflow: hidden;
        }

        #toggle-panel {
            transition: transform 0.3s ease;
        }

        .rotated {
            transform: rotate(180deg);
        }

        #ai-log {
            background: rgba(0, 0, 0, 0.85);
            border: 1px solid rgba(168, 85, 247, 0.3);
            max-height: 200px;
            overflow-y: auto;
            font-size: 10px;
            padding: 12px;
            border-radius: 4px;
            pointer-events: auto;
            margin-top: 8px;
        }
    </style>
</head>

<body data-teams="0">

    <div class="ui-layer flex flex-col justify-between p-6">
        <div id="debug-overlay"
            class="absolute left-6 top-24 z-20 pointer-events-none text-[10px] font-mono text-white/70 bg-black/40 border border-white/10 rounded px-2 py-1">
            DEBUG: JS NOT STARTED (if this stays, check /game.js loads)
        </div>
        <div class="flex justify-between items-start">
            <div>
                <h1 class="text-3xl font-black tracking-tighter glow-text opacity-90">BIG INT FIELD</h1>
                <p class="text-[10px] text-gray-500 mt-1 uppercase tracking-[0.3em]">HAPPY VS UNHAPPY // DECOY DUMMIES
                </p>
                <div class="text-[9px] text-red-400 mt-2 font-mono">BUILD: SPAWNDEBUG-2</div>
                <div id="ai-status"
                    class="text-[9px] text-purple-400 mt-2 uppercase tracking-widest hidden animate-pulse">✨ AI
                    Analyzing...</div>
            </div>

	            <div id="master-panel"
	                class="pointer-events-auto bg-black/80 backdrop-blur-xl border border-white/5 p-4 rounded flex flex-col gap-3 w-72 transition-all duration-300 ease-in-out">
	                <div class="flex justify-between items-center border-b border-white/10 pb-2 cursor-pointer"
	                    onclick="toggleMasterPanel()">
	                    <div class="text-[9px] text-gray-500 uppercase tracking-widest font-bold">Command Center</div>
	                    <div class="flex items-center gap-2">
	                        <button id="help-btn" class="btn pointer-events-auto text-[8px] px-2 py-1"
	                            onclick="event.stopPropagation();">?</button>
	                        <div id="toggle-panel" class="text-[10px] text-white/50">▼</div>
	                    </div>
	                </div>

                <div id="panel-content" class="flex flex-col gap-3 transition-opacity duration-300">
                    <div class="flex flex-col gap-2 border-b border-white/10 pb-3">
                        <div class="flex justify-between items-center">
                            <label class="text-[8px] text-gray-400">SIM</label>
                            <span id="sim-status" class="text-[9px] text-gray-300 font-mono">RUN</span>
                        </div>
                        <div class="grid grid-cols-3 gap-2">
                            <button id="pause-btn" class="btn pointer-events-auto text-[8px]">PAUSE</button>
                            <button id="step-btn" class="btn pointer-events-auto text-[8px]">STEP</button>
                            <button id="center-selected-btn" class="btn pointer-events-auto text-[8px]">CENTER</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-[8px] text-gray-400 w-12">SPEED</label>
                            <input type="range" id="timescale-slider" min="0.1" max="2" step="0.1" value="1"
                                class="pointer-events-auto">
                            <span id="timescale-display" class="text-[9px] text-gray-300 font-mono w-10 text-right">1.0x</span>
                        </div>
                    </div>
	                    <div class="flex flex-col gap-2">
	                        <div class="flex justify-between items-center">
	                            <label class="text-[8px] text-gray-400">RANDOM MAX</label>
	                            <input type="text" id="gen-val" value="2000000">
	                        </div>
	                        <div id="gen-stats" class="text-[8px] text-gray-500 font-mono leading-tight">
	                            digits=— bits=— mod2=— mod3=— mod5=— mod9=—
	                        </div>

	                        <div class="flex flex-col gap-1 border-t border-white/5 pt-2">
	                            <label class="text-[8px] text-yellow-500">PRECISION SUMMON</label>
	                            <div class="flex gap-1">
	                                <input type="text" id="exact-val" placeholder="Value"
	                                    class="border-yellow-500/30 text-yellow-400 flex-1">
	                                <input type="number" id="exact-qty" value="1" min="1" max="50"
	                                    class="w-12 border-yellow-500/30 text-yellow-400">
	                            </div>
	                            <div id="exact-stats" class="text-[8px] text-gray-500 font-mono leading-tight">
	                                digits=— bits=— mod2=— mod3=— mod5=— mod9=— prime=— happy=—
	                            </div>
	                            <button id="spawn-exact-btn"
	                                class="btn bg-yellow-500/10 border-yellow-500/30 text-yellow-400 py-1">SUMMON</button>
	                        </div>

	                        <div class="flex flex-col gap-1 mt-1 border-t border-white/5 pt-2">
	                            <div class="flex justify-between items-center">
	                                <label class="text-[8px] text-gray-400">AUTO SPAWN</label>
	                                <span id="rate-display" class="text-[10px] text-green-400">50/s</span>
	                            </div>
	                            <input type="range" id="spawn-rate-slider" min="0" max="500" value="30"
	                                class="pointer-events-auto">
	                            <div id="spawn-debug" class="text-[8px] text-gray-500 font-mono mt-1">SPAWN: JS NOT STARTED</div>
	                            <div id="runtime-error" class="text-[8px] text-red-400 font-mono mt-1 hidden"></div>
	                        </div>

	                        <div class="flex flex-col gap-2 mt-1 border-t border-white/5 pt-2">
	                            <div class="flex justify-between items-center">
	                                <label class="text-[8px] text-emerald-400 uppercase tracking-widest">RNG</label>
	                                <span class="text-[8px] text-gray-500 font-mono">seeded spawn only</span>
	                            </div>
	                            <div class="flex gap-1 items-center">
	                                <input type="text" id="rng-seed" placeholder="seed (optional)"
	                                    class="pointer-events-auto flex-1 border-emerald-500/30 text-emerald-200">
	                                <select id="spawn-dist"
	                                    class="pointer-events-auto bg-black/70 border border-white/10 text-gray-200 text-[9px] font-mono px-2 py-1 rounded">
	                                    <option value="uniform">UNIFORM</option>
	                                    <option value="log">LOG</option>
	                                    <option value="prime">PRIME-HEAVY</option>
	                                </select>
	                            </div>
	                            <div class="flex gap-1 items-center">
	                                <input type="number" id="digits-min" min="0" placeholder="min digits"
	                                    class="pointer-events-auto w-24 border-emerald-500/30 text-emerald-200">
	                                <input type="number" id="digits-max" min="0" placeholder="max digits"
	                                    class="pointer-events-auto w-24 border-emerald-500/30 text-emerald-200">
	                                <span class="text-[8px] text-gray-500 font-mono">0=off</span>
	                            </div>
	                        </div>

	                        <div id="gesture-panel" class="hidden flex flex-col gap-2 mt-2 border-t border-white/5 pt-2">
                            <div class="flex justify-between items-center">
                                <label class="text-[8px] text-emerald-400 uppercase tracking-widest">Strategic Gestures</label>
                                <span id="gesture-active" class="text-[9px] text-emerald-200 font-mono">—</span>
                            </div>
                            <div class="flex justify-between items-center gap-2">
                                <label class="text-[8px] text-gray-500">FORMATION</label>
                                <select id="formation-select"
                                    class="pointer-events-auto bg-black/70 border border-white/10 text-gray-200 text-[9px] font-mono px-2 py-1 rounded flex-1">
                                    <option value="default">DEFAULT</option>
                                    <option value="wedge">WEDGE</option>
                                    <option value="line">LINE</option>
                                    <option value="box">BOX</option>
                                    <option value="escort">ESCORT</option>
                                </select>
                            </div>
                            <div class="grid grid-cols-5 gap-1">
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="1">1 RALLY</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="2">2 SCAT</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="3">3 PUSH</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="4">4 HOLD</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="5">5 RING</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="6">6 HUNT</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="7">7 RETR</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="8">8 MEET</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="9">9 DUMY</button>
                                <button class="btn pointer-events-auto text-[8px] py-1" data-gesture="0">0 CLEAR</button>
                            </div>
                            <div class="text-[8px] text-gray-500">Tip: select a leader/commander, then press keys <span
                                    class="text-gray-300 font-mono">1–0</span>.</div>
                        </div>
                    </div>

                    <div class="flex flex-col gap-2 border-t border-white/10 pt-2">
                        <div class="flex justify-between items-center">
                            <label class="text-[8px] text-gray-400">PERF</label>
                            <span id="fps-display" class="text-[9px] text-gray-300 font-mono">FPS: --</span>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <button id="lowfx-btn" class="btn pointer-events-auto text-[8px]">LOW FX: OFF</button>
                            <button id="rings-btn" class="btn pointer-events-auto text-[8px]">RINGS: ON</button>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <button id="fog-btn" class="btn pointer-events-auto text-[8px]">FOG: MINIMAP OFF</button>
                            <button id="headless-btn" class="btn pointer-events-auto text-[8px]">HEADLESS: OFF</button>
                        </div>
                        <div class="flex items-center gap-2">
                            <label class="text-[8px] text-gray-400 w-12">DRAW</label>
                            <input type="range" id="drawdist-slider" min="800" max="4000" step="200" value="2400"
                                class="pointer-events-auto">
                            <span id="drawdist-display" class="text-[9px] text-gray-300 font-mono w-12 text-right">2400</span>
                        </div>
                    </div>

                    <div class="flex flex-col gap-2 border-t border-white/10 pt-2">
                        <div class="flex justify-between items-center">
                            <label class="text-[8px] text-gray-400">BASE UPGRADES</label>
                            <span id="knowledge-display" class="text-[9px] text-gray-300 font-mono">K: -- / --</span>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <button id="upg-even-wall" class="btn pointer-events-auto text-[8px] border-cyan-500/30 text-cyan-300">EVEN WALL (50k)</button>
                            <button id="upg-odd-wall" class="btn pointer-events-auto text-[8px] border-fuchsia-500/30 text-fuchsia-300">ODD WALL (50k)</button>
                            <button id="upg-even-heal" class="btn pointer-events-auto text-[8px] border-cyan-500/30 text-cyan-300">EVEN HEAL (40k)</button>
                            <button id="upg-odd-heal" class="btn pointer-events-auto text-[8px] border-fuchsia-500/30 text-fuchsia-300">ODD HEAL (40k)</button>
                            <button id="upg-even-spawn" class="btn pointer-events-auto text-[8px] border-cyan-500/30 text-cyan-300">EVEN SPAWN+ (60k)</button>
                            <button id="upg-odd-spawn" class="btn pointer-events-auto text-[8px] border-fuchsia-500/30 text-fuchsia-300">ODD SPAWN+ (60k)</button>
                            <button id="upg-even-turret" class="btn pointer-events-auto text-[8px] border-cyan-500/30 text-cyan-300">EVEN TURRET (80k)</button>
                            <button id="upg-odd-turret" class="btn pointer-events-auto text-[8px] border-fuchsia-500/30 text-fuchsia-300">ODD TURRET (80k)</button>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-2">
                        <button id="spawn-cyclic-btn"
                            class="btn bg-amber-500/10 border-amber-500/30 text-amber-400">CYCLIC (EVEN)</button>
                        <button id="spawn-resistance-btn"
                            class="btn bg-indigo-500/10 border-indigo-500/30 text-indigo-400">BIG BOSS</button>
                    </div>

                    <div class="grid grid-cols-2 gap-2 border-t border-white/10 pt-2">
                        <button id="dummy-even-btn" class="btn border-cyan-500/30 text-cyan-400 text-[8px]">EVEN
                            DUMMY</button>
                        <button id="dummy-odd-btn" class="btn border-fuchsia-500/30 text-fuchsia-400 text-[8px]">ODD
                            DUMMY</button>
                    </div>

	                    <div class="flex flex-col gap-2 pt-2 border-t border-white/10">
	                        <div class="flex items-center gap-2">
	                            <label class="text-[8px] text-purple-300 uppercase tracking-widest w-14">AI KEY</label>
	                            <input type="password" id="ai-key" placeholder="(optional)"
	                                class="pointer-events-auto flex-1 border-purple-500/30 text-purple-200">
	                        </div>
	                        <div id="ai-mode" class="text-[8px] text-gray-500 font-mono">AI: OFFLINE (no key)</div>
	                        <button id="ai-analyze-btn" class="btn btn-ai w-full text-[9px]">✨ TACTICAL ANALYSIS</button>
	                        <button id="preset-toggle-btn" class="btn pointer-events-auto w-full text-[9px]">PRESETS</button>
	                        <div id="preset-panel" class="hidden">
                            <textarea id="preset-text"
                                class="pointer-events-auto w-full h-24 bg-black/70 border border-white/10 text-gray-200 text-[9px] font-mono p-2 rounded"
                                placeholder="Preset JSON..."></textarea>
                            <div class="grid grid-cols-3 gap-2 mt-2">
                                <button id="preset-export-btn" class="btn pointer-events-auto text-[8px]">EXPORT</button>
                                <button id="preset-import-btn" class="btn pointer-events-auto text-[8px]">IMPORT</button>
                                <button id="preset-save-btn" class="btn pointer-events-auto text-[8px]">SAVE</button>
                            </div>
                        </div>
                        <div id="ai-log" class="hidden">
                            <div id="ai-log-content" class="text-purple-200 mb-3 leading-relaxed">System Ready.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex flex-col gap-2 text-right bg-black/60 backdrop-blur-lg p-4 border border-white/5 rounded">
                <div class="flex gap-6 justify-end">
                    <div>
                        <div class="text-cyan-400 text-[11px] font-black" id="wins-even">W 0</div>
                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Even Wins</div>
                    </div>
                    <div>
                        <div class="text-fuchsia-500 text-[11px] font-black" id="wins-odd">W 0</div>
                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Odd Wins</div>
                    </div>
                    <div>
                        <div class="text-white/80 text-[11px] font-black" id="round-display">R 1</div>
                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Round</div>
                    </div>
                </div>
                <div class="flex gap-6 justify-end">
                <div>
                    <div class="text-cyan-400 text-2xl font-black" id="score-even">0</div>
                    <div class="text-[8px] text-gray-500 uppercase tracking-widest">Evens</div>
                </div>
                <div>
                    <div class="text-fuchsia-500 text-2xl font-black" id="score-odd">0</div>
                    <div class="text-[8px] text-gray-500 uppercase tracking-widest">Odds</div>
                </div>
                </div>
                <div class="flex gap-6 justify-end mt-1">
                    <div>
                        <div class="text-[10px] text-cyan-200 font-mono" id="kills-even">0</div>
                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Even Kills</div>
                    </div>
                    <div>
                        <div class="text-[10px] text-pink-200 font-mono" id="kills-odd">0</div>
                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Odd Kills</div>
                    </div>
                </div>
	                <div class="flex gap-6 justify-end mt-1">
	                    <div>
	                        <div class="text-[9px] text-cyan-200 font-mono" id="top-even-killer">--</div>
	                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Top Even Killer</div>
	                    </div>
	                    <div>
	                        <div class="text-[9px] text-pink-200 font-mono" id="top-odd-killer">--</div>
	                        <div class="text-[8px] text-gray-500 uppercase tracking-widest">Top Odd Killer</div>
	                    </div>
	                </div>
	                <div id="selected-panel"
	                    class="hidden pointer-events-auto text-left bg-black/70 backdrop-blur-lg border border-white/10 rounded p-3 w-64">
	                    <div class="flex justify-between items-center">
	                        <div class="text-[9px] text-gray-300 uppercase tracking-widest font-bold">Selected</div>
	                        <button id="selected-copy-btn" class="btn pointer-events-auto text-[8px] px-2 py-1">COPY</button>
	                    </div>
	                    <div class="mt-2 text-[9px] text-gray-300 font-mono leading-snug">
	                        <div>value: <span id="selected-value" class="text-emerald-200">—</span></div>
	                        <div>eff: <span id="selected-eff" class="text-cyan-200">—</span></div>
	                        <div>team: <span id="selected-team" class="text-gray-200">—</span></div>
	                        <div>role: <span id="selected-role" class="text-gray-200">—</span></div>
	                        <div>age: <span id="selected-age" class="text-gray-200">—</span></div>
	                        <div>traits: <span id="selected-traits" class="text-gray-200">—</span></div>
	                    </div>
	                    <div class="grid grid-cols-4 gap-1 mt-2">
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="inc">+1</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="dec">-1</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="mul2">×2</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="mul10">×10</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="square">x²</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="rev">REV</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="sum">ΣDIG</button>
	                        <button class="btn pointer-events-auto text-[8px] py-1" data-op="nextp">NPRIME</button>
	                    </div>
	                    <div class="text-[8px] text-gray-500 font-mono mt-2">Tip: click a unit • Tab cycles leaders</div>
	                </div>
	            </div>
	        </div>

        <div id="graph-container" class="pointer-events-none">
            <canvas id="graph-canvas"></canvas>
        </div>

        <div id="minimap-container" class="pointer-events-auto">
            <canvas id="minimap-canvas"></canvas>
        </div>

        <div class="flex justify-between items-end pointer-events-auto">
            <div class="max-w-md text-[9px] text-gray-500">
                <p>Hazard: <span class="text-purple-400">Multiplier units clone, then original conducts field mines (<
                            20).</span>
                </p>
                <p>Tactics: <span class="text-cyan-400">Dummies distract the opposing team.</span></p>
            </div>
            <div class="text-right flex flex-col gap-1">
                <button id="reset-btn" class="btn pointer-events-auto">PURGE FIELD</button>
                <div class="text-[10px] text-gray-500 font-mono" id="entity-counter">0 UNITS</div>
            </div>
        </div>
    </div>

    <canvas id="battlefield"></canvas>

	    <script src="game.js"></script>

</body>

</html>
